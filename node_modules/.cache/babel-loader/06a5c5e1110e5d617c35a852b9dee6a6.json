{"ast":null,"code":"import _toConsumableArray from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lidiadavidson/Documents/lastfm/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lidiadavidson/Documents/lastfm/src/components/App.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\"; // import './App.css';\n\nimport Results from \"./Results\";\nimport Inputs from \"./Inputs\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      results: \"\",\n      queryObj: {},\n      toptags: [],\n      resultsList: []\n    };\n\n    _this.getTopTags = function (artist) {\n      var lastFMurl = \"http://ws.audioscrobbler.com/2.0/\";\n      lastFMurl += \"?method=artist.gettoptags&artist=\".concat(artist);\n      lastFMurl += \"&api_key=\".concat(process.env.b686750a281378159473653159e27252, \"&format=json\");\n      setTimeout(function () {\n        return axios.get(lastFMurl).then(function (results) {\n          var toptags = results.data.toptags;\n          console.log(toptags.tag[0].name);\n          var tempArr = [toptags.tag[0].name, toptags.tag[1].name];\n\n          _this.setState({\n            toptags: [].concat(_toConsumableArray(_this.state.toptags), tempArr)\n          });\n        }).catch(function (err) {\n          console.log(artist + \"caused tag error\");\n        });\n      }, 1000);\n    };\n\n    _this.findTally = function () {\n      var arr = _this.state.toptags;\n      var tally = {};\n      var a = \"\";\n\n      for (var i = 0; i < arr.length; i++) {\n        a = arr[i];\n        tally[a] = (tally[a] || 0) + 1;\n      }\n\n      var sortable = [];\n\n      for (var tag in tally) {\n        sortable.push([tag, tally[tag]]);\n      }\n\n      sortable.sort(function (a, b) {\n        return a[1] - b[1];\n      }).reverse();\n\n      _this.setState({\n        resultsList: sortable\n      });\n\n      console.log(sortable);\n    };\n\n    _this.getLastFM = function (type, entry) {\n      // Set the API root URL\n      var lastFMurl = \"http://ws.audioscrobbler.com/2.0/\";\n      var keyAndFormat = \"&api_key=\".concat(process.env.REACT_APP_LASTM_KEY, \"&format=json\");\n      var methods = \"\";\n\n      switch (type) {\n        case \"user\":\n          // Get user's library\n          methods += \"?method=library.getartists&limit=200&page=2&user=\".concat(entry);\n          break;\n\n        case \"user chart list\":\n          // Get user's charts\n          methods += \"?method=user.getweeklychartlist&user=\".concat(entry);\n          break;\n\n        case \"artist\":\n          // Get similar artists\n          methods += \"?method=artist.getSimilar&&artist=\".concat(entry);\n          break;\n\n        case \"artist top tags\":\n          // Get top tags\n          methods += \"?method=artist.gettoptags&artist=\".concat(entry);\n          break;\n\n        case \"user top tags\":\n          // Get user's top assigned tags\n          methods += \"?method=user.gettoptags&user=\".concat(entry);\n          break;\n\n        default:\n          console.log(\"No matching cases\");\n          break;\n      }\n\n      axios.get(lastFMurl + methods + keyAndFormat).then(function (results) {\n        _this.setState({\n          queryObj: results.data\n        });\n\n        console.log(results.data);\n      }).catch(function (err) {\n        console.log(err);\n      }); //   lastFMurl = `http://ws.audioscrobbler.com/2.0/&api_key=${process.env.REACT_APP_LASTM_KEY}&format=json`;\n      // this.state.queryObj.artists.forEach(curr => {\n      //   console.log(curr.name);\n      // });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Inputs, {\n        queryObj: this.state.queryObj,\n        getLastFM: this.getLastFM,\n        getTopTags: this.getTopTags,\n        findTally: this.findTally,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Results, {\n        resultsList: this.state.resultsList,\n        results: this.state.results,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/lidiadavidson/Documents/lastfm/src/components/App.js"],"names":["React","Component","axios","Results","Inputs","App","state","results","queryObj","toptags","resultsList","getTopTags","artist","lastFMurl","process","env","b686750a281378159473653159e27252","setTimeout","get","then","data","console","log","tag","name","tempArr","setState","catch","err","findTally","arr","tally","a","i","length","sortable","push","sort","b","reverse","getLastFM","type","entry","keyAndFormat","REACT_APP_LASTM_KEY","methods"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n// import './App.css';\nimport Results from \"./Results\";\nimport Inputs from \"./Inputs\";\n\nclass App extends Component {\n  state = {\n    results: \"\",\n    queryObj: {},\n    toptags: [],\n    resultsList: []\n  };\n\n  getTopTags = artist => {\n    let lastFMurl = `http://ws.audioscrobbler.com/2.0/`;\n    lastFMurl += `?method=artist.gettoptags&artist=${artist}`;\n    lastFMurl += `&api_key=${\n      process.env.b686750a281378159473653159e27252\n    }&format=json`;\n\n    setTimeout(\n      () =>\n        axios\n          .get(lastFMurl)\n          .then(results => {\n            let toptags = results.data.toptags;\n            console.log(toptags.tag[0].name);\n            let tempArr = [toptags.tag[0].name, toptags.tag[1].name];\n            this.setState({ toptags: [...this.state.toptags, ...tempArr] });\n          })\n          .catch(err => {\n            console.log(artist + \"caused tag error\");\n          }),\n      1000\n    );\n  };\n\n  findTally = () => {\n    let arr = this.state.toptags;\n    let tally = {};\n    let a = \"\";\n\n    for (let i = 0; i < arr.length; i++) {\n      a = arr[i];\n      tally[a] = (tally[a] || 0) + 1;\n    }\n\n    var sortable = [];\n    for (var tag in tally) {\n      sortable.push([tag, tally[tag]]);\n    }\n\n    sortable\n      .sort(function(a, b) {\n        return a[1] - b[1];\n      })\n      .reverse();\n\n    this.setState({ resultsList: sortable });\n\n    console.log(sortable);\n  };\n\n  getLastFM = (type, entry) => {\n    // Set the API root URL\n    let lastFMurl = `http://ws.audioscrobbler.com/2.0/`;\n    let keyAndFormat = `&api_key=${\n      process.env.REACT_APP_LASTM_KEY\n    }&format=json`;\n    let methods = \"\";\n\n    switch (type) {\n      case \"user\":\n        // Get user's library\n        methods += `?method=library.getartists&limit=200&page=2&user=${entry}`;\n        break;\n\n      case \"user chart list\":\n        // Get user's charts\n        methods += `?method=user.getweeklychartlist&user=${entry}`;\n        break;\n\n      case \"artist\":\n        // Get similar artists\n        methods += `?method=artist.getSimilar&&artist=${entry}`;\n        break;\n\n      case \"artist top tags\":\n        // Get top tags\n        methods += `?method=artist.gettoptags&artist=${entry}`;\n        break;\n\n      case \"user top tags\":\n        // Get user's top assigned tags\n        methods += `?method=user.gettoptags&user=${entry}`;\n        break;\n\n      default:\n        console.log(\"No matching cases\");\n        break;\n    }\n\n    axios\n      .get(lastFMurl + methods + keyAndFormat)\n      .then(results => {\n        this.setState({ queryObj: results.data });\n        console.log(results.data);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n\n    //   lastFMurl = `http://ws.audioscrobbler.com/2.0/&api_key=${process.env.REACT_APP_LASTM_KEY}&format=json`;\n\n    // this.state.queryObj.artists.forEach(curr => {\n    //   console.log(curr.name);\n\n    // });\n  };\n\n  render() {\n    return (\n      <div>\n        <Inputs\n          queryObj={this.state.queryObj}\n          getLastFM={this.getLastFM}\n          getTopTags={this.getTopTags}\n          findTally={this.findTally}\n        />\n        <Results\n          resultsList={this.state.resultsList}\n          results={this.state.results}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}